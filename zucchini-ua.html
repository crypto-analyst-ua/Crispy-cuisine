<!doctype html>
<html lang="uk">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Хрустка кухня - Кабачки і патиссони на зиму</title>

    <!-- CSS FILES -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/bootstrap-icons.css" rel="stylesheet">
    <link href="css/tooplate-crispy-kitchen.css" rel="stylesheet">
    
    <style>
        .file-input-wrapper {
            position: relative;
            overflow: hidden;
            display: inline-block;
            width: 100%;
        }
        
        .file-input-label {
            display: block;
            padding: 0.375rem 0.75rem;
            font-size: 1rem;
            font-weight: 400;
            line-height: 1.5;
            color: #212529;
            background-color: #fff;
            background-clip: padding-box;
            border: 1px solid #ced4da;
            border-radius: 0.25rem;
            cursor: pointer;
            transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
        }
        
        .file-input-label:hover {
            background-color: #f8f9fa;
        }
        
        .file-input-label input[type="file"] {
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0;
            cursor: pointer;
            width: 100%;
            height: 100%;
        }
        
        .file-name {
            display: block;
            margin-top: 0.25rem;
            font-size: 0.875rem;
            color: #6c757d;
        }
        
        .recipe-preview {
            margin-top: 2rem;
            display: none;
        }
        
        .recipe-card {
            border-radius: 0.5rem;
            overflow: hidden;
            box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
            transition: transform 0.3s ease;
        }
        
        .recipe-card:hover {
            transform: translateY(-5px);
        }
        
        .user-recipe-tag {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.75rem;
            font-weight: 600;
            color: white;
        }
        
        .menu-image-wrap {
            position: relative;
        }
        
        .recipe-form {
            background-color: #f8f9fa;
            padding: 2rem;
            border-radius: 0.5rem;
            box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
        }
        
        .form-title {
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #198754;
        }
        
        .carousel-link {
            display: block;
            position: relative;
            color: inherit;
            text-decoration: none;
        }
        
        .carousel-link:hover {
            text-decoration: none;
        }
        
        .carousel-link .carousel-caption {
            z-index: 10;
        }
        
        .carousel-link::after {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 1;
        }
        
        .spinner-border {
            width: 3rem;
            height: 3rem;
            display: none;
        }
        
        #loadingRecipes {
            text-align: center;
            padding: 2rem;
        }
        
        .recipe-modal .modal-content {
            border-radius: 0.8rem;
            overflow: hidden;
        }
        
        .recipe-modal .modal-header {
            background: linear-gradient(to right, #28a745, #20c997);
            color: white;
            border-bottom: none;
        }
        
        .recipe-modal .modal-body {
            padding: 1.5rem;
        }
        
        .recipe-modal .modal-footer {
            background-color: #f8f9fa;
            border-top: 1px solid #dee2e6;
        }
        
        .recipe-ingredients {
            background-color: #f8f9fa;
            border-radius: 0.5rem;
            padding: 1rem;
        }
        
        .recipe-instructions {
            white-space: pre-line;
            line-height: 1.8;
        }
        
        /* Стилі для аутентифікації */
        .auth-modal .modal-content {
            border-radius: 0.8rem;
        }
        
        .auth-modal .modal-header {
            background: linear-gradient(to right, #28a745, #20c997);
            color: white;
            border-bottom: none;
        }
        
        .user-avatar {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: #198754;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 8px;
        }
        
        /* Стилі для уведомления о подтверждении email */
        #emailWarning {
            position: fixed;
            top: 70px;
            left: 0;
            right: 0;
            z-index: 1030;
            padding: 10px 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            text-align: center;
        }

        /* Исправление z-index для модальных окон */
        .modal {
            z-index: 1060 !important;
        }
        .modal-backdrop {
            z-index: 1050 !important;
        }
        
        /* Стили для аватарки в навигации */
        .nav-avatar {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: #198754;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 8px;
        }

        /* Стили для предупреждения о email */
        .email-verification-info {
            background-color: #e8f4fd;
            border-left: 4px solid #1a73e8;
            padding: 15px;
            margin-top: 15px;
            border-radius: 4px;
            font-size: 0.9rem;
        }

        .email-verification-info p {
            margin-bottom: 8px;
            display: flex;
            align-items: flex-start;
        }

        .email-verification-info p:before {
            content: "•";
            margin-right: 8px;
            font-weight: bold;
            color: #1a73e8;
        }

        .email-verification-info strong {
            color: #1a73e8;
        }
        
        /* ДОБАВЛЕННЫЕ ИСПРАВЛЕНИЯ */
        #recipePreview {
            margin-top: 20px;
            display: block;
        }
        
        .spinner-border {
            display: inline-block !important;
            width: 1.5rem;
            height: 1.5rem;
            vertical-align: text-bottom;
        }
        
        #loadingRecipes .spinner-border {
            display: block !important;
            margin: 0 auto;
        }
        
        .recipe-date {
            font-size: 0.85rem;
            color: #6c757d;
        }

        /* Добавлено для превью изображений */
        .preview-image-container {
            height: 200px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #f8f9fa;
            border: 1px dashed #dee2e6;
            border-radius: 5px;
            margin-bottom: 15px;
        }
    </style>
</head>

<body>
    <nav class="navbar navbar-expand-lg bg-white shadow-lg">
        <div class="container">
            <button 
                class="navbar-toggler" 
                type="button" 
                data-bs-toggle="collapse" 
                data-bs-target="#navbarNav" 
                aria-controls="navbarNav" 
                aria-expanded="false" 
                aria-label="Toggle navigation"
            >
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <a class="navbar-brand" href="index-ua.html">
                Хрустка кухня
            </a>

            <div class="d-lg-none"></div>

            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav mx-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Головна</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="top-ua.html">Перше</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="top2-ua.html">Друге</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="desert-ua.html">Десерт</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#add-recipe">Додати рецепт</a>
                    </li>
                </ul>
                
                <!-- Блок аутентифікації -->
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item dropdown" id="accountDropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown">
                            <div class="d-flex align-items-center">
                                <div id="userAvatar" class="nav-avatar d-none">
                                    <span id="avatarInitials">U</span>
                                </div>
                                <span id="userStatus">Акаунт</span>
                            </div>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li id="loginItem"><a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#loginModal">Увійти</a></li>
                            <li id="registerItem"><a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#registerModal">Реєстрація</a></li>
                            <li id="logoutItem" class="d-none"><a class="dropdown-item" href="#" id="logoutLink">Вийти</a></li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a href="zucchini-ru.html"><span class="category-tag me-3 bg-info">RU</span></a>
                    </li>
                </ul>
            </div>
        </div>
        
        <!-- Предупреждение о неподтвержденном email -->
        <div id="emailWarning" class="d-none alert alert-warning rounded-0 mb-0 text-center w-100"></div>
    </nav>

    <!-- Модальні вікна для аутентифікації -->
    <div class="modal fade auth-modal" id="loginModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Увійти</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="loginForm">
                        <div class="mb-3">
                            <label for="loginEmail" class="form-label">Email*</label>
                            <input type="email" class="form-control" id="loginEmail" required>
                            <div class="error-message" id="loginEmailError"></div>
                        </div>
                        <div class="mb-3">
                            <label for="loginPassword" class="form-label">Пароль*</label>
                            <input type="password" class="form-control" id="loginPassword" required>
                            <div class="error-message" id="loginPasswordError"></div>
                        </div>
                        <div class="d-grid">
                            <button type="submit" class="btn btn-success">
                                <span id="loginSpinner" class="spinner-border spinner-border-sm d-none"></span>
                                Увійти
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade auth-modal" id="registerModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Реєстрація</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="registerForm">
                        <div class="mb-3">
                            <label for="registerName" class="form-label">Ім'я*</label>
                            <input type="text" class="form-control" id="registerName" required>
                            <div class="error-message" id="registerNameError"></div>
                        </div>
                        <div class="mb-3">
                            <label for="registerEmail" class="form-label">Email*</label>
                            <input type="email" class="form-control" id="registerEmail" required>
                            <div class="error-message" id="registerEmailError"></div>
                        </div>
                        <div class="mb-3">
                            <label for="registerPassword" class="form-label">Пароль*</label>
                            <input type="password" class="form-control" id="registerPassword" required>
                            <div class="error-message" id="registerPasswordError"></div>
                        </div>
                        <div class="mb-3">
                            <label for="confirmPassword" class="form-label">Підтвердіть пароль*</label>
                            <input type="password" class="form-control" id="confirmPassword" required>
                            <div class="error-message" id="confirmPasswordError"></div>
                        </div>
                        <div class="d-grid">
                            <button type="submit" class="btn btn-success">
                                <span id="registerSpinner" class="spinner-border spinner-border-sm d-none"></span>
                                Зареєструватися
                            </button>
                        </div>
                    </form>
                    
                    <!-- Додано інформацію про підтвердження email -->
                    <div class="email-verification-info mt-4">
                        <p>📧 Ми надішлемо листа для підтвердження email після реєстрації.</p>
                        <p>🔍 Якщо ви не бачите листа, перевірте папку "Спам" або "Уся пошта".</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальне вікно для інформації про підтвердження email -->
    <div class="modal fade" id="emailVerificationModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title">Підтвердження Email</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="alert alert-success">
                        <h5>Реєстрація успішна!</h5>
                        <p>На вашу електронну адресу відправлено лист з посиланням для підтвердження.</p>
                    </div>
                    
                    <div class="email-verification-info">
                        <p>📧 Ми надіслали лист для підтвердження email на вашу адресу.</p>
                        <p>🔍 Якщо ви не бачите листа, перевірте папку "Спам" або "Уся пошта".</p>
                    </div>
                    
                    <div class="alert alert-info mt-3">
                        <p class="mb-0">Не отримали лист? <a href="#" id="resendVerificationInModal">Надіслати знову</a></p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Закрити</button>
                </div>
            </div>
        </div>
    </div>

    <main>
        <header class="site-header site-news-detail-header">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <h2>Кабачки, цукіні, патиссони на зиму</h2>
                    </div>
                </div>
            </div>
        </header>

        <section class="news-detail section-padding pt-0">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12 col-12">
                        <img src="images/news/news-detail-header5.jpg" class="img-fluid news-detail-image" alt="Кабачки, цукіні, патиссони">

                        <div class="col-lg-10 col-10 mx-auto mt-5">
                            <h4 class="mb-3">КАБАЧКИ, ЦУКІНІ, ПАТИССОНИ</h4>
                            <p>
                                Літній стіл немислимий без кабачків та патисонів.
                                Щоправда, останнім часом їх дуже потіснили. Корисні та ніжні цукіні. Втім, всі вони хороші, причому як у смаженому, тушкованому та інших, так і у консервованому вигляді. їх солять, квасять, маринують, включають до складу овочевих закусочних консервів, консервують у вигляді компоту. Для консервування вибирай молоді недозрілі кабачки, цукіні і патисони, у яких ще не загрубіла шкірка і не визріло насіння.
                            </p>

                            <h4 class="mb-3">Кабачки мариновані.</h4>
                            <ul class="list">
                                <li class="list-item">На трилітрову банку.</li>
                                <li class="list-item">2 кг молодих кабачків.</li>
                                <li class="list-item">90-100 г солі.</li>
                                <li class="list-item">3-5 зубчиків часнику.</li>
                                <li class="list-item">1 ч. ложка 70% оцтової кислоти.</li>
                                <li class="list-item">1-2 стебла кропу з парасольками, лист і корінь хрону, по 5 листків чорної смородини та вишні, гілочка естрадону, гілочка м'яти.</li>
                            </ul>
                            <p>
                                Кабачки вимий, відріж «хвостики», великі плоди розріж упоперек на частини. На дно стерилізованої банки поклади приправи. Наповни банку кабачками, залий доверху окропом, накрий кришкою і дай постояти 10 хвилин. Потім злий воду в каструлю, додай ще трохи води, всип сіль і приготуй заливку. Поки що вариться заливка, ще раз залий кабачки окропом. через 10 хв злий воду з банки, наповни її киплячою заливкою до самого верху, влий оцтову кислоту і закатай банку.
                                Після цього переверни банку догори дном, укутай і залиш до повного остигання.
                                До речі, за цим же рецептом ти можеш законсервувати мариновані патисони. Для цієї заготівлі вибирай найдрібніші патисончики приблизно одного розміру. Вони будуть дуже ефектно виглядати у вигляді гарніру в м'ясі або рибі.
                            </p>

                            <h4 class="mb-3">Кабачки, мариновані з яблуками та морквою.</h4>
                            <ul class="list">
                                <li class="list-item">500 г яблук.</li>
                                <li class="list-item">300 г моркви.</li>
                                <li class="list-item">1 кг кабачків.</li>
                                <li class="list-item">50 г зелені кропу.</li>
                                <li class="list-item">Для заливання: на 1 л води.</li>
                                <li class="list-item">Для заливання: на 1 л води – 1 ст. ложка солі, 2 ст. ложки цукру, 150 мл 9% оцту.</li>
                            </ul>
                            <p>
                                Кабачки, яблука та морква вимий, очисти та наріж: кабачки та яблука – кубиками, морква – брусочками. Кріп промий і поклади на дно банок, потім щільно поклади суміш із кабачків, яблук і моркви. Приготуй заливку та розлий її в банки. Пастеризуй при 90 ° С: банки ємністю 0,5 л – 15 хв, 1 л – 20 хв, а після цього закатай.
                            </p>

                            <h4 class="mb-3">Гострий салат з кабачків.</h4>
                            <ul class="list">
                                <li class="list-item">На 6-7 півлітрових банок.</li>
                                <li class="list-item">3 кг молодих кабачків (цукіні).</li>
                                <li class="list-item">1-1/2 ст. ложки солі, 1-1/2 ст. ложки цукру.</li>
                                <li class="list-item">150 г подрібненого часнику, 1 склянка яблучного оцту, 1 склянка рафінованої олії.</li>
                            </ul>
                            <p>
                                Кабачки вимий і наріж півколами. Уклади кабачки в каструлю, додай подрібнений часник, сіль, цукор, оцет і масло, перемішай, накрий кришкою і постав у прохолодне місце на ніч. Вранці постав каструлю на вогонь, доведи суміш до кипіння і вари, помішуючи, 25 хв. Потім розклади кабачки в стерилізовані банки, закатай, переверни і закутай для самостерилізації.
                            </p>

                            <h4 class="mb-3">Закуска з кабачків з часником та помідорами.</h4>
                            <ul class="list">
                                <li class="list-item">На 12-13 півлітрових банок.</li>
                                <li class="list-item">6 кг кабачків.</li>
                                <li class="list-item">1,5 кг помідорів.</li>
                                <li class="list-item">2 головки часнику.</li>
                                <li class="list-item">2 ст. ложки з гіркою солі, 1 неповна склянка цукру.</li>
                                <li class="list-item">2 склянки 9%-ного оцту, 500 мл рафінованої олії, 10 лаврових листків.</li>
                            </ul>
                            <p>
                                Очищені від шкірки кабачки та помідори наріж кубиками. Часник дрібно порубай. У каструлю налий олію і доведи його до кипіння. Після цього опусти в киплячу олію кабачки, помідори та часник, додай сіль та цукор, перемішай і вари 10 хв. Потім поклади лавровий лист і влий оцет, перемішай суміш і знову доведи її до кипіння. Після цього відразу ж разложи суміш у банки, закатай, переверни і укутай.
                            </p>

                            <h4 class="mb-3">Лечо з кабачками.</h4>
                            <ul class="list">
                                <li class="list-item">На 3 літрові банки.</li>
                                <li class="list-item">1,5 кг очищених від внутренностей кабачків.</li>
                                <li class="list-item">6 стручків солодкого перця.</li>
                                <li class="list-item">1 кг червоних помідорів.</li>
                                <li class="list-item">6 цибулин.</li>
                                <li class="list-item">2 ст. ложки солі, 2/3 склянки цукру, 1/2 склянки 9%-ного оцту, 2/3 склянки рафінованої рослинної олії.</li>
                            </ul>
                            <p>
                                Очищені від нутрощів кабачки і перець наріж соломкою, цибулю очисти і наріж півкільцями, а помідори пропусти через м'ясорубку. змішай у каструлі рослинна олія, сіль, цукор та оцет. Скип'яті суміш, опусти в неї кабачки, через 5 хв додай цибулю, ще через 5 хв. перець. Через 5 хв вилий в каструлю помідорну масу і вари суміш 10 хв. Розклади лечо у стерилізовані банки та закатай.
                            </p>

                            <h4 class="mb-3">Кабачково-аличевий компом.</h4>
                            <ul class="list">
                                <li class="list-item">На трилітрову банку.</li>
                                <li class="list-item">1 кг молодих кабачків.</li>
                                <li class="list-item">800 г жовтої аличі.</li>
                                <li class="list-item">2 л воды.</li>
                                <li class="list-item">400 г цукру.</li>
                            </ul>
                            <p>
                                Кабачки очисти від шкірки, розріж на 4 частини, ложкой видали серцевину, а м'якоть, що залишилася, наріж кубиками зі стороною 1 см. У приготовані банки розложи аличу, зверху поклади кабачки і залий киплячий цукровий сироп. Накрий банки кришками, укутай рушником і дай їм повністю охолонути. Потім злий сироп, прокип'яти його, знову залий у банки і відразу ж закатай їх. Після цього переверни банки догори дном та укутай для самостерилізації. Цей компот приємно здивує тебе ананасовим смаком.
                            </p>

                            <h4 class="mb-3">Кабачки з помідорами та морквою на зиму.</h4>
                            <ul class="list">
                                <li class="list-item">Кабачки 500 Грам. Помідори 500 Грам. Морква 100 Грам.</li>
                                <li class="list-item">Цибуля ріпчаста 50 Грам.</li>
                                <li class="list-item">Цукор 50 Грам. Сіль 0,5 ст. ложки.</li>
                                <li class="list-item">Оцет 9% 1 Ст. ложка.</li>
                                <li class="list-item">Олія рослинна 40 Грам.</li>
                            </ul>
                            <p>
                                Закатайте на зиму смачні та ароматні кабачки з помідорами та морквою. Поєднання овочів дуже вдале і сподобається всім шанувальникам таких закусок. Підготуйте усі інгредієнти.
                                Наріжте кубиками кабачки.
                                Кубиками наріжте цибулю та морквину.
                                Трохи розігрійте олію в каструлі, всипте цибулю та морквину. Пасеруйте 5 хвилин.
                                Потім всипте кабачки.
                                зверху всипте нарізані кубиками помідори.
                                Всипте цукор, сіль|соль|.
                                Гасіть овочі помішуючи близько 20-25 хвилин. Влийте оцет, перемішайте. Дайте закипіти та зніміть з вогню.
                                Розкладіть овочі у чисті банки.
                                Закатайте кришками та утепліть.
                                Зберігайте заготівлю у темній коморі або льоху. вихід - 3 банки по 400 мл. Смачного!
                            </p>

                            <h4 class="mb-3">Кабачки як огірки на зиму.</h4>
                            <ul class="list">
                                <li class="list-item">Кабачок 300-350 Грам.</li>
                                <li class="list-item">Кріп 1 Штука гілочка.</li>
                                <li class="list-item">Часник 2 Зубчика перець чорний горошком 4-5 Штук. Лавровий лист 1 Штука.</li>
                                <li class="list-item">Оцет 9% 1 Ст. ложка. Вода 500 Мілілітрів.</li>
                                <li class="list-item">Сіль 12 Грам. Цукор 18 Грам.</li>
                            </ul>
                            <p>
                                Пропоную рецепт маринованих кабачків на зиму, які до смаку виходять, як огірки. Хрусткі, пікантні та ароматні. Це чудова закуска, яка чудово урізноманітнить повсякденне меню. Підготуйте усі інгредієнти.
                                Кабачки помийте, відріжте кінчики. Наріжте кабачки скибочками товщиною 2-3 см. Крім звичайних кабачків можна використовувати цукіні.
                                на дно чистої стерилізованої банки викладіть очищені зубчики часнику, лавровий листок та перець горошком.
                                Додайте гілочку кропу.
                                Заповніть банку кабачками.
                                Влийте гарячу воду, прикрийте кришкою та залиште на 15 хвилин.
                                Злийте воду в каструлю, додайте сіль та цукор. Доведіть до кипіння.
                                у банку додайте оцет і влийте гарячий маринад.
                                Герметично закрутіть банку, переверніть вгору дном, укутайте в рушник і залиште так до повного остигання.
                                Після заготівлі можна прибрати в холодне місце на зберігання. Кабачки, як огірки, готові.
                            </p>
                            
                            <!-- Додано після останнього рецепту "Кабачки як огірки на зиму" -->
                            <h4 class="mb-3">Кабачки як гриби (в маринаді)</h4>
                            <ul class="list">
                                <li class="list-item">Кабачки — 2 кг</li>
                                <li class="list-item">Часник — 1 головка</li>
                                <li class="list-item">Кріп — 1 пучок</li>
                                <li class="list-item">Оцет 9% — 100 мл</li>
                                <li class="list-item">Рослинна олія — 100 мл</li>
                                <li class="list-item">Сіль — 2 ст. ложки</li>
                                <li class="list-item">Цукор — 3 ст. ложки</li>
                                <li class="list-item">Чорний перець — за смаком</li>
                            </ul>
                            <p>
                                1. Наріжте кабачки кубиками.<br>
                                2. Додайте подрібнений часник, кріп, сіль, цукор, оцет та олію.<br>
                                3. Залиште маринуватися на 2–3 години.<br>
                                4. Потім розкладіть у стерилізовані банки, накрийте кришками.<br>
                                5. Стерилізуйте 15–20 хв (півлітрові банки) і закатайте.
                            </p>

                            <h4 class="mb-3">Ікра з кабачків (класична)</h4>
                            <ul class="list">
                                <li class="list-item">Кабачки — 3 кг</li>
                                <li class="list-item">Морква — 500 г</li>
                                <li class="list-item">Цибуля — 500 г</li>
                                <li class="list-item">Томатна паста — 3 ст. ложки</li>
                                <li class="list-item">Рослинна олія — 150 мл</li>
                                <li class="list-item">Сіль — 1 ст. ложка</li>
                                <li class="list-item">Цукор — 1 ст. ложка</li>
                                <li class="list-item">Оцет 9% — 2 ст. ложки</li>
                            </ul>
                            <p>
                                1. Наріжте овочі, обсмажте кабачки, моркву й цибулю окремо.<br>
                                2. Змішайте все, додайте томатну пасту, спеції.<br>
                                3. Перебийте блендером до однорідності.<br>
                                4. Тушкуйте ще 30–40 хвилин.<br>
                                5. В кінці додайте оцет, розкладіть у банки та закатайте.
                            </p>

                            <h4 class="mb-3">Кабачки в томатному соусі</h4>
                            <ul class="list">
                                <li class="list-item">Кабачки — 2 кг</li>
                                <li class="list-item">Помідори — 1 кг</li>
                                <li class="list-item">Морква — 500 г</li>
                                <li class="list-item">Цибуля — 500 г</li>
                                <li class="list-item">Часник — 1 головка</li>
                                <li class="list-item">Цукор — 100 г</li>
                                <li class="list-item">Сіль — 2 ст. ложки</li>
                                <li class="list-item">Оцет 9% — 100 мл</li>
                                <li class="list-item">Олія — 100 мл</li>
                            </ul>
                            <p>
                                1. Натріть моркву, наріжте інші овочі.<br>
                                2. Пропустіть помідори через м’ясорубку.<br>
                                3. У великій каструлі готуйте все 40–60 хв.<br>
                                4. Розкладіть по банках і закатайте.
                            </p>

                            <h4 class="mb-3">Кабачки по-корейськи</h4>
                            <ul class="list">
                                <li class="list-item">Кабачки — 2 кг (натерти на тертці)</li>
                                <li class="list-item">Морква — 500 г</li>
                                <li class="list-item">Часник — 1 головка</li>
                                <li class="list-item">Оцет 9% — 100 мл</li>
                                <li class="list-item">Олія — 100 мл</li>
                                <li class="list-item">Сіль — 1 ст. ложка</li>
                                <li class="list-item">Цукор — 2 ст. ложки</li>
                                <li class="list-item">Приправа для моркви по-корейськи — 1 пакетик</li>
                            </ul>
                            <p>
                                1. Змішати все, залишити на 2–3 години.<br>
                                2. Розкласти по банках, стерилізувати 15 хв.<br>
                                3. Закатати.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="BgImage"></section>

        <!-- Секция для добавления рецептов -->
        <section id="add-recipe" class="section-padding">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-lg-8 col-12">
                        <div id="authMessage" class="alert alert-info text-center">
                            <p>Будь ласка, <a href="#" data-bs-toggle="modal" data-bs-target="#loginModal">увійдіть</a> або <a href="#" data-bs-toggle="modal" data-bs-target="#registerModal">зареєструйтесь</a>, щоб додати рецепт!</p>
                        </div>
                        
                        <div id="recipeFormContainer" class="d-none">
                            <div class="recipe-form">
                                <h2 class="form-title">Додати свій рецепт</h2>
                                <form id="recipeForm">
                                    <div class="mb-3">
                                        <label for="recipeTitle" class="form-label">Назва рецепту*</label>
                                        <input 
                                            type="text" 
                                            class="form-control" 
                                            id="recipeTitle" 
                                            required 
                                            placeholder="Введіть назву вашого рецепту"
                                        >
                                    </div>
                                    <div class="mb-3">
                                        <label for="recipeCategory" class="form-label">Категорія*</label>
                                        <select class="form-select" id="recipeCategory" required>
                                            <option value="">Виберіть категорію</option>
                                            <option value="Сніданок">Сніданок</option>
                                            <option value="Обід">Обід</option>
                                            <option value="Вечеря">Вечеря</option>
                                            <option value="Десерт">Десерт</option>
                                            <option value="Пістне">Пістне</option>
                                            <option value="Консервація">Консервація</option>
                                            <option value="Випічка">Випічка</option>
                                            <option value="Напої">Напої</option>
                                            <option value="Салати">Салати</option>
                                            <option value="Закуски">Закуски</option>
                                        </select>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Зображення (опціонально)</label>
                                        <div class="file-input-wrapper">
                                            <div class="file-input-label">
                                                <i class="bi bi-upload me-2"></i>Обрати файл
                                                <input 
                                                    type="file" 
                                                    class="form-control" 
                                                    id="recipeImageFile" 
                                                    accept="image/*"
                                                >
                                            </div>
                                            <span id="fileName" class="file-name">Файл не обрано</span>
                                        </div>
                                        <div class="form-text">Максимальний розмір: 1MB (JPG, PNG)</div>
                                    </div>
                                    <div class="mb-3">
                                        <label for="recipeIngredients" class="form-label">Інгредієнти*</label>
                                        <textarea 
                                            class="form-control" 
                                            id="recipeIngredients" 
                                            rows="4" 
                                            required 
                                            placeholder="Перелічіть інгредієнти, кожен з нового рядка"
                                        ></textarea>
                                    </div>
                                    <div class="mb-3">
                                        <label for="recipeInstructions" class="form-label">Інструкція приготування*</label>
                                        <textarea 
                                            class="form-control" 
                                            id="recipeInstructions" 
                                            rows="6" 
                                            required 
                                            placeholder="Опишіть кроки приготування"
                                        ></textarea>
                                    </div>
                                    <div class="d-grid">
                                        <button type="submit" class="btn btn-success btn-lg">
                                            <span 
                                                id="submitSpinner" 
                                                class="spinner-border spinner-border-sm me-2 d-none" 
                                                role="status" 
                                                aria-hidden="true"
                                            ></span>
                                            Додати рецепт
                                        </button>
                                    </div>
                                </form>
                                
                                <div id="recipePreview" class="recipe-preview mt-4">
                                    <h4>Попередній перегляд:</h4>
                                    <div class="card recipe-card">
                                        <img 
                                            id="previewImage" 
                                            src="images/default-recipe.jpg" 
                                            class="card-img-top" 
                                            alt="Попередній перегляд"
                                        >
                                        <div class="card-body">
                                            <h5 id="previewTitle" class="card-title">Назва рецепту</h5>
                                            <p id="previewCategory" class="card-text text-muted">Категорія: не вибрано</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Раздел для отображения пользовательских рецептов -->
        <section id="user-recipes" class="section-padding bg-white">
            <div class="container">
                <div class="row">
                    <h2 class="text-center mb-lg-5 mb-4">Рецепти від користувачів</h2>
                    
                    <div id="loadingRecipes">
                        <div class="spinner-border text-success" role="status">
                            <span class="visually-hidden">Завантаження...</span>
                        </div>
                        <p class="mt-3">Завантажуємо рецепти...</p>
                    </div>
                    
                    <div id="recipesContainer" class="row">
                        <!-- Сюда будут добавляться рецепты через JS -->
                    </div>
                    
                    <div id="noRecipesMessage" class="col-12 text-center d-none">
                        <p>Поки немає доданих рецептів. Будьте першим!</p>
                    </div>
                    
                    <div class="text-center mt-4">
                        <button id="loadMoreBtn" class="btn btn-outline-success d-none">Показати ще</button>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="site-footer section-padding">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <h4 class="text-white mb-4 me-5">Хрустка кухня</h4>
                    <div style="
                      background-color: #fafafa;
                      padding: 25px 20px;
                      text-align: center;
                      font-size: 14px;
                      color: #777;
                      border-top: 1px solid #f0f0f0;
                    ">
                      <p style="margin: 0 0 10px 0; font-weight: 500; color: #555;">
                        © 2025 Домашні кулінарні рецепти
                      </p>
                      
                      <nav style="margin-top: 15px;">
                        <a href="about-ua.html" style="
                          margin: 0 12px;
                          color: #666;
                          text-decoration: none;
                          transition: color 0.2s;
                        ">Про нас</a>
                        
                        <a href="mailto:korovinkonstantin0@gmail.com" style="
                          margin: 0 12px;
                          color: #666;
                          text-decoration: none;
                          transition: color 0.2s;
                        ">Контакти</a>
                        
                        <a href="privacy-ua.html" style="
                          margin: 0 12px;
                          color: #666;
                          text-decoration: none;
                          transition: color 0.2s;
                        ">Політика конфіденційності</a>
                      </nav>
                      
                      <div style="margin-top: 20px; color: #aaa; font-size: 12px;">
                        Усі права захищено
                      </div>
                    </div>
                    <div style="text-align:center; margin-top: 2rem;">
                      <img 
                        src="https://hits.sh/crispy-cuisine-7334c.web.app.svg?style=flat-square&label=Перегляди&color=blue&logo=github" 
                        alt="Перегляди"
                      />
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- JAVASCRIPT FILES -->
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/custom.js"></script>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>
    
    <script>
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
          apiKey: "AIzaSyCmO3UwOLexKfUsNBiDhfVsJ7WWS9K_ft4",
          authDomain: "crispy-cuisine-7334c.firebaseapp.com",
          projectId: "crispy-cuisine-7334c",
          storageBucket: "crispy-cuisine-7334c.appspot.com",
          messagingSenderId: "18003644183",
          appId: "1:18003644183:web:4abb0800c18b00d7b83152",
          measurementId: "G-250S27R82Y"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const auth = firebase.auth();
        
        // Global variables
        let lastVisible = null;
        let selectedFile = null;
        const PAGE_SIZE = 6;

        // Функция для экранирования HTML
        function escapeHtml(unsafe) {
            return unsafe
                .replace(/&/g, "&amp;")
                .replace(/</g, "&lt;")
                .replace(/>/g, "&gt;")
                .replace(/"/g, "&quot;")
                .replace(/'/g, "&#039;");
        }

        $(document).ready(function() {
            // Load first recipes
            loadRecipes();
            
            // Event handlers
            $('#recipeForm').submit(handleFormSubmit);
            $('#recipeImageFile').on('change', handleImageUpload);
            $('#recipeTitle, #recipeCategory').on('input change', updatePreview);
            $('#loadMoreBtn').on('click', loadMoreRecipes);
            
            // Authentication handlers
            $('#loginForm').submit(handleLogin);
            $('#registerForm').submit(handleRegister);
            $('#logoutLink').click(handleLogout);
            
            // Track auth state
            auth.onAuthStateChanged(handleAuthStateChange);

            // Обробник для повторного відправлення листа підтвердження
            $(document).on('click', '#resendVerificationLink, #resendVerificationNavLink, #resendVerificationInModal', function(e) {
                e.preventDefault();
                const user = auth.currentUser;
                if (user) {
                    user.sendEmailVerification()
                        .then(() => {
                            alert('Лист для підтвердження був відправлений знову на вашу електронну адресу.');
                        })
                        .catch(error => {
                            console.error("Resend error:", error);
                            alert('Помилка: ' + error.message);
                        });
                }
            });
        });

        // Handle auth state change
        function handleAuthStateChange(user) {
            const loginItem = $('#loginItem');
            const registerItem = $('#registerItem');
            const logoutItem = $('#logoutItem');
            const userStatus = $('#userStatus');
            const userAvatar = $('#userAvatar');
            const authMessage = $('#authMessage');
            const recipeFormContainer = $('#recipeFormContainer');
            const emailWarning = $('#emailWarning');
            
            if (user) {
                // Всегда показываем информацию о пользователе
                userStatus.text(user.displayName || user.email);
                
                // Генерируем инициалы для аватара
                const name = user.displayName || user.email || '';
                const initials = name.split(' ').map(n => n[0]).join('').substring(0, 2).toUpperCase();
                $('#avatarInitials').text(initials);
                userAvatar.removeClass('d-none');
                
                // Обновляем меню
                loginItem.addClass('d-none');
                registerItem.addClass('d-none');
                logoutItem.removeClass('d-none');
                
                // Управление формой рецептов
                authMessage.addClass('d-none');
                recipeFormContainer.removeClass('d-none');
                
                // Управление предупреждением о email
                if (!user.emailVerified) {
                    emailWarning.removeClass('d-none').html(
                        `Ваш email <strong>${escapeHtml(user.email)}</strong> не підтверджено. 
                        <a href="#" id="resendVerificationNavLink">Надіслати лист знову</a>`
                    );
                } else {
                    emailWarning.addClass('d-none');
                }
            } else {
                // Сброс для неавторизованных пользователей
                userStatus.text('Акаунт');
                userAvatar.addClass('d-none');
                
                loginItem.removeClass('d-none');
                registerItem.removeClass('d-none');
                logoutItem.addClass('d-none');
                
                authMessage.removeClass('d-none');
                recipeFormContainer.addClass('d-none');
                emailWarning.addClass('d-none');
            }
        }

        // Handle login
        function handleLogin(e) {
            e.preventDefault();
            
            const email = $('#loginEmail').val().trim();
            const password = $('#loginPassword').val();
            
            // Валидация
            $('#loginEmailError').text('');
            $('#loginPasswordError').text('');
            
            let isValid = true;
            if (!email) {
                $('#loginEmailError').text('Будь ласка, введіть email');
                isValid = false;
            }
            if (!password) {
                $('#loginPasswordError').text('Будь ласка, введіть пароль');
                isValid = false;
            }
            if (!isValid) return;
            
            // UI состояния
            $('#loginSpinner').removeClass('d-none');
            $('#loginForm button').prop('disabled', true);
            
            auth.signInWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    const user = userCredential.user;
                    
                    if (!user.emailVerified) {
                        $('#loginEmailError').html(
                            'Ваш email ще не підтверджено. <a href="#" id="resendVerificationLink">Надіслати лист знову</a>'
                        );
                    } else {
                        $('#loginModal').modal('hide');
                        $('#loginForm')[0].reset();
                    }
                })
                .catch(error => {
                    console.error("Login error:", error);
                    handleAuthError(error, '#loginEmailError', '#loginPasswordError');
                })
                .finally(() => {
                    $('#loginSpinner').addClass('d-none');
                    $('#loginForm button').prop('disabled', false);
                });
        }

        // Обработка ошибок аутентификации
        function handleAuthError(error, emailSelector, passwordSelector) {
            let errorMessage = "Помилка аутентифікації";
            
            switch(error.code) {
                case "auth/user-not-found":
                case "auth/invalid-email":
                    errorMessage = "Користувача з таким email не знайдено";
                    $(emailSelector).text(errorMessage);
                    break;
                case "auth/wrong-password":
                    errorMessage = "Невірний пароль";
                    $(passwordSelector).text(errorMessage);
                    break;
                case "auth/too-many-requests":
                    errorMessage = "Забагато спроб. Спробуйте пізніше";
                    $(passwordSelector).text(errorMessage);
                    break;
                case "auth/user-disabled":
                    errorMessage = "Акаунт вимкнено";
                    $(emailSelector).text(errorMessage);
                    break;
                default:
                    $(passwordSelector).text(errorMessage);
            }
        }

        // Handle registration
        function handleRegister(e) {
            e.preventDefault();
            
            const name = $('#registerName').val().trim();
            const email = $('#registerEmail').val().trim();
            const password = $('#registerPassword').val();
            const confirmPassword = $('#confirmPassword').val();
            
            // Валидация
            $('#registerNameError').text('');
            $('#registerEmailError').text('');
            $('#registerPasswordError').text('');
            $('#confirmPasswordError').text('');
            
            let isValid = true;
            if (!name) {
                $('#registerNameError').text('Будь ласка, введіть ваше ім\'я');
                isValid = false;
            }
            if (!email) {
                $('#registerEmailError').text('Будь ласка, введіть email');
                isValid = false;
            }
            if (!password) {
                $('#registerPasswordError').text('Будь ласка, введіть пароль');
                isValid = false;
            }
            if (password.length < 6) {
                $('#registerPasswordError').text('Пароль повинен містити щонайменше 6 символів');
                isValid = false;
            }
            if (password !== confirmPassword) {
                $('#confirmPasswordError').text('Паролі не співпадають');
                isValid = false;
            }
            if (!isValid) return;
            
            // UI состояния
            $('#registerSpinner').removeClass('d-none');
            $('#registerForm button').prop('disabled', true);
            
            auth.createUserWithEmailAndPassword(email, password)
                .then(userCredential => {
                    // Обновляем профиль пользователя
                    return userCredential.user.updateProfile({
                        displayName: name
                    }).then(() => {
                        return userCredential.user.sendEmailVerification();
                    });
                })
                .then(() => {
                    $('#registerModal').modal('hide');
                    $('#registerForm')[0].reset();
                    
                    // Показываем модальное окно с информацией о подтверждении email
                    $('#emailVerificationModal').modal('show');
                })
                .catch(error => {
                    console.error("Registration error:", error);
                    handleAuthError(error, '#registerEmailError', '#registerPasswordError');
                })
                .finally(() => {
                    $('#registerSpinner').addClass('d-none');
                    $('#registerForm button').prop('disabled', false);
                });
        }

        // Handle logout
        function handleLogout(e) {
            e.preventDefault();
            auth.signOut()
                .catch(error => {
                    console.error("Logout error:", error);
                    alert('Помилка при виході: ' + error.message);
                });
        }

        // Handle image upload
        function handleImageUpload(e) {
            const file = e.target.files[0];
            if (!file) {
                $('#fileName').text('Файл не обрано');
                selectedFile = null;
                return;
            }

            // File type validation
            if (!file.type.match('image/jpeg') && !file.type.match('image/png')) {
                alert('Будь ласка, виберіть файл у форматі JPG або PNG.');
                resetFileInput();
                return;
            }

            // File size validation
            if (file.size > 1048576) {
                alert('Файл занадто великий. Максимальний розмір 1MB.');
                resetFileInput();
                return;
            }

            $('#fileName').text(file.name);
            
            const reader = new FileReader();
            reader.onload = function(event) {
                selectedFile = event.target.result;
                updatePreview();
            };
            reader.readAsDataURL(file);
        }

        function resetFileInput() {
            $('#recipeImageFile').val('');
            $('#fileName').text('Файл не обрано');
        }

        function updatePreview() {
            const title = $('#recipeTitle').val() || 'Назва рецепту';
            const category = $('#recipeCategory').val() || 'не вибрано';
            
            if (selectedFile) {
                $('#previewImage').attr('src', selectedFile);
            }
            
            $('#previewTitle').text(title);
            $('#previewCategory').text('Категорія: ' + category);
            $('#recipePreview').show();
        }

        // Upload image to Cloudinary
        async function uploadImage(file) {
            try {
                const cloudName = "dhfkb6xv2"; // Your Cloudinary cloud name
                const uploadPreset = "unsigned_preset"; // Your upload preset

                const formData = new FormData();
                formData.append("file", file);
                formData.append("upload_preset", uploadPreset);
                formData.append("folder", "recipe_images"); // Optional folder

                const response = await fetch(`https://api.cloudinary.com/v1_1/${cloudName}/image/upload`, {
                    method: "POST",
                    body: formData
                });

                // Check for HTTP errors
                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.error.message || "Помилка Cloudinary");
                }

                const data = await response.json();
                
                if (data.secure_url) {
                    // Add optimization parameters to URL
                    return data.secure_url.replace('/upload/', '/upload/q_auto,f_auto/');
                } else {
                    throw new Error("Не вдалося отримати URL зображення");
                }
            } catch (error) {
                console.error("Помилка завантаження зображення:", error);
                throw new Error("Не вдалося завантажити зображення на Cloudinary");
            }
        }

        // Handle form submission
        async function handleFormSubmit(e) {
            e.preventDefault();
            
            // Проверка авторизации
            if (!auth.currentUser) {
                alert('Будь ласка, увійдіть, щоб додати рецепт!');
                return;
            }
            
            // UI состояния
            $('#submitSpinner').removeClass('d-none');
            $('#recipeForm button').prop('disabled', true);
            
            try {
                // Загрузка изображения
                let imageUrl = 'images/default-recipe.jpg';
                
                if (selectedFile) {
                    const fileInput = document.getElementById('recipeImageFile');
                    const file = fileInput.files[0];
                    if (file) {
                        imageUrl = await uploadImage(file);
                    }
                }
                
                // Создаем объект рецепта
                const recipe = {
                    title: $('#recipeTitle').val(),
                    category: $('#recipeCategory').val(),
                    image: imageUrl,
                    ingredients: $('#recipeIngredients').val(),
                    instructions: $('#recipeInstructions').val(),
                    userId: auth.currentUser.uid,
                    userName: auth.currentUser.displayName || auth.currentUser.email,
                    createdAt: firebase.firestore.FieldValue.serverTimestamp()
                };
                
                // Сохраняем в Firestore
                await db.collection("recipes").add(recipe);
                
                // Сброс формы
                $('#recipeForm')[0].reset();
                resetFileInput();
                await loadRecipes();
                
                // Уведомление и скролл
                alert('Рецепт успішно додано!');
                $('html, body').animate({
                    scrollTop: $('#user-recipes').offset().top - 100
                }, 800);
            } catch (error) {
                console.error("Помилка збереження рецепту:", error);
                alert('Сталася помилка: ' + error.message);
            } finally {
                $('#submitSpinner').addClass('d-none');
                $('#recipeForm button').prop('disabled', false);
            }
        }

        // Load recipes
        async function loadRecipes() {
            try {
                // UI состояния
                $('#loadingRecipes').show();
                $('#recipesContainer').empty();
                $('#noRecipesMessage').addClass('d-none');
                $('#loadMoreBtn').addClass('d-none');
                
                // Запрос к Firestore
                const query = db.collection("recipes")
                    .orderBy("createdAt", "desc")
                    .limit(PAGE_SIZE);
                
                const snapshot = await query.get();
                
                // Обработка результатов
                if (snapshot.empty) {
                    $('#noRecipesMessage').removeClass('d-none');
                    $('#loadingRecipes').hide();
                    return;
                }
                
                // Пагинация
                lastVisible = snapshot.docs[snapshot.docs.length - 1];
                displayRecipes(snapshot);
                
                // Кнопка "Показать еще"
                if (snapshot.size === PAGE_SIZE) {
                    $('#loadMoreBtn').removeClass('d-none');
                }
                
                $('#loadingRecipes').hide();
            } catch (error) {
                console.error("Помилка завантаження рецептів:", error);
                $('#loadingRecipes').html(
                    '<p class="text-danger">Помилка завантаження рецептів. Спробуйте оновити сторінку.</p>'
                );
            }
        }

        // Load more recipes
        async function loadMoreRecipes() {
            try {
                // UI состояния
                $('#loadMoreBtn').prop('disabled', true)
                    .html('<span class="spinner-border spinner-border-sm me-2"></span>Завантаження...');
                
                // Запрос к Firestore
                const query = db.collection("recipes")
                    .orderBy("createdAt", "desc")
                    .startAfter(lastVisible)
                    .limit(PAGE_SIZE);
                
                const snapshot = await query.get();
                
                // Обработка результатов
                if (snapshot.empty) {
                    $('#loadMoreBtn').hide();
                    return;
                }
                
                // Пагинация
                lastVisible = snapshot.docs[snapshot.docs.length - 1];
                displayRecipes(snapshot);
                
                // Обновление кнопки
                $('#loadMoreBtn').prop('disabled', false).text('Показати ще');
                if (snapshot.size < PAGE_SIZE) {
                    $('#loadMoreBtn').hide();
                }
            } catch (error) {
                console.error("Помилка завантаження рецептів:", error);
                $('#loadMoreBtn').prop('disabled', false).text('Показати ще');
                alert('Помилка завантаження додаткових рецептів');
            }
        }

        // Display recipes
        function displayRecipes(snapshot) {
            const container = $('#recipesContainer');
            
            snapshot.forEach(doc => {
                const recipe = doc.data();
                const recipeId = doc.id;
                
                // Форматирование даты
                const date = recipe.createdAt?.toDate 
                    ? new Date(recipe.createdAt.toDate()).toLocaleDateString('uk-UA') 
                    : 'Сьогодні';
                
                // Инициалы пользователя
                const userName = recipe.userName || "Анонім";
                const initials = userName.substring(0, 2).toUpperCase();
                
                // Генерация HTML
                const recipeHtml = `
                <div class="col-lg-4 col-md-6 col-12 mb-4">
                    <div class="menu-thumb recipe-card">
                        <div class="menu-image-wrap position-relative">
                            <a href="javascript:void(0);" onclick="showRecipeDetails('${recipeId}')">
                                <img 
                                    src="${recipe.image}" 
                                    class="img-fluid menu-image" 
                                    alt="${escapeHtml(recipe.title)}" 
                                    loading="lazy"
                                >
                                <span class="user-recipe-tag bg-success">Користувацький</span>
                            </a>
                        </div>
                        <div class="menu-info">
                            <a href="javascript:void(0);" onclick="showRecipeDetails('${recipeId}')">
                                <h4 class="mb-1">${escapeHtml(recipe.title)}</h4>
                            </a>
                            <div class="d-flex align-items-center mt-2">
                                <div class="user-avatar small">
                                    <span>${initials}</span>
                                </div>
                                <small class="text-muted">${escapeHtml(userName)}</small>
                                <small class="recipe-date ms-auto">${date}</small>
                            </div>
                        </div>
                    </div>
                </div>`;
                
                container.append(recipeHtml);
            });
        }

        // Show recipe details
        window.showRecipeDetails = async function(recipeId) {
            try {
                // Удаляем предыдущее модальное окно
                $('#recipeDetailModal').remove();
                
                // Получаем рецепт из Firestore
                const doc = await db.collection("recipes").doc(recipeId).get();
                if (!doc.exists) {
                    alert('Рецепт не знайдено');
                    return;
                }
                
                const recipe = doc.data();
                
                // Форматирование даты
                const date = recipe.createdAt?.toDate 
                    ? new Date(recipe.createdAt.toDate()).toLocaleDateString('uk-UA', {
                        day: 'numeric',
                        month: 'long',
                        year: 'numeric'
                    }) 
                    : 'Сьогодні';
                
                // Инициалы пользователя
                const userName = recipe.userName || "Анонім";
                const initials = userName.substring(0, 2).toUpperCase();
                
                // Генерация HTML модального окна
                const modalHtml = `
                <div class="modal fade recipe-modal" id="recipeDetailModal" tabindex="-1">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">${escapeHtml(recipe.title)}</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body">
                                <div class="row">
                                    <div class="col-md-5 mb-3 mb-md-0">
                                        <img 
                                            src="${recipe.image}" 
                                            class="img-fluid rounded mb-3" 
                                            alt="${escapeHtml(recipe.title)}"
                                        >
                                        <div class="recipe-meta">
                                            <div class="d-flex align-items-center mb-2">
                                                <div class="user-avatar">
                                                    <span>${initials}</span>
                                                </div>
                                                <div>
                                                    <div><strong>Автор:</strong> ${escapeHtml(userName)}</div>
                                                    <div><strong>Додано:</strong> ${date}</div>
                                                </div>
                                            </div>
                                            <p><strong>Категорія:</strong> ${escapeHtml(recipe.category || 'Не вказана')}</p>
                                        </div>
                                    </div>
                                    <div class="col-md-7">
                                        <div class="mb-4">
                                            <h5>Інгредієнти:</h5>
                                            <div class="recipe-ingredients">${formatText(recipe.ingredients)}</div>
                                        </div>
                                        <div>
                                            <h5>Інструкція:</h5>
                                            <div class="recipe-instructions">${formatText(recipe.instructions)}</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Закрити</button>
                            </div>
                        </div>
                    </div>
                </div>`;
                
                // Добавляем и показываем модальное окно
                $('body').append(modalHtml);
                const modal = new bootstrap.Modal('#recipeDetailModal');
                modal.show();
                
                // Удаляем модальное окно после закрытия
                $('#recipeDetailModal').on('hidden.bs.modal', function() {
                    $(this).remove();
                });
            } catch (error) {
                console.error("Помилка завантаження рецепту:", error);
                alert('Не вдалося завантажити рецепт');
            }
        }

        // Format text
        function formatText(text) {
            if (!text) return '';
            const escaped = escapeHtml(text);
            return escaped.replace(/\n/g, '<br>');
        }
    </script>
</body>
</html>