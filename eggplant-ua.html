<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Хрустка кухня - Баклажани на зиму</title>

    <!-- CSS FILES -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/bootstrap-icons.css" rel="stylesheet">
    <link href="css/tooplate-crispy-kitchen.css" rel="stylesheet">
    <style>
        .file-input-wrapper {
            position: relative;
            overflow: hidden;
            display: inline-block;
            width: 100%;
        }
        
        .file-input-label {
            display: block;
            padding: 0.375rem 0.75rem;
            font-size: 1rem;
            font-weight: 400;
            line-height: 1.5;
            color: #212529;
            background-color: #fff;
            background-clip: padding-box;
            border: 1px solid #ced4da;
            border-radius: 0.25rem;
            cursor: pointer;
            transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
        }
        
        .file-input-label:hover {
            background-color: #f8f9fa;
        }
        
        .file-input-label input[type="file"] {
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0;
            cursor: pointer;
            width: 100%;
            height: 100%;
        }
        
        .file-name {
            display: block;
            margin-top: 0.25rem;
            font-size: 0.875rem;
            color: #6c757d;
        }
        
        .recipe-preview {
            margin-top: 2rem;
            display: none;
        }
        
        .recipe-card {
            border-radius: 0.5rem;
            overflow: hidden;
            box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
            transition: transform 0.3s ease;
        }
        
        .recipe-card:hover {
            transform: translateY(-5px);
        }
        
        .user-recipe-tag {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.75rem;
            font-weight: 600;
            color: white;
        }
        
        .menu-image-wrap {
            position: relative;
        }
        
        .recipe-form {
            background-color: #f8f9fa;
            padding: 2rem;
            border-radius: 0.5rem;
            box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
        }
        
        .form-title {
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #198754;
        }
        
        .carousel-link {
            display: block;
            position: relative;
            color: inherit;
            text-decoration: none;
        }
        
        .carousel-link:hover {
            text-decoration: none;
        }
        
        .carousel-link .carousel-caption {
            z-index: 10;
        }
        
        .carousel-link::after {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 1;
        }
        
        .spinner-border {
            width: 3rem;
            height: 3rem;
            display: none;
        }
        
        #loadingRecipes {
            text-align: center;
            padding: 2rem;
        }
        
        .recipe-modal .modal-content {
            border-radius: 0.8rem;
            overflow: hidden;
        }
        
        .recipe-modal .modal-header {
            background: linear-gradient(to right, #28a745, #20c997);
            color: white;
            border-bottom: none;
        }
        
        .recipe-modal .modal-body {
            padding: 1.5rem;
        }
        
        .recipe-modal .modal-footer {
            background-color: #f8f9fa;
            border-top: 1px solid #dee2e6;
        }
        
        .recipe-ingredients {
            background-color: #f8f9fa;
            border-radius: 0.5rem;
            padding: 1rem;
        }
        
        .recipe-instructions {
            white-space: pre-line;
            line-height: 1.8;
        }
    </style>
</head>

<body>
    <nav class="navbar navbar-expand-lg bg-white shadow-lg">
        <div class="container">
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <a class="navbar-brand" href="index.html">
                Хрустка кухня
            </a>

            <div class="d-lg-none"></div>

            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav mx-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Головна</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="top-ua.html">Перше</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="top2-ua.html">Друге</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="desert-ua.html">Десерт</a>
                    </li>
                    
                    <li class="nav-item">
                        <a href="eggplant-ru.html"><span class="category-tag me-3 bg-info">RU</span></a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <main>
        <header class="site-header site-news-detail-header">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <h2>Баклажани на зиму</h2>
                    </div>
                </div>
            </div>
        </header>

        <section class="news-detail section-padding pt-0">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12 col-12">
                        <img src="images/news/news-detail-header.jpg" class="img-fluid news-detail-image" alt="Баклажани">
                        
                        <div class="col-lg-10 col-10 mx-auto mt-5">
                            <h4 class="mb-3">Баклажани</h4>
                            <p>
                                В Україні баклажани заготовляти люблять і роблять це з розмахом. Їх квасять, фарширують, маринують, готують із них ікру та різноманітні пікантні та гострі закуски. На жаль, консервування більшості з цих дуже смачних заготовок займає дуже багато часу. Але це не повинно тебе зупиняти, адже завжди можна заготовити баклажанні напівфабрикати (сушені або заморожені печені баклажани), а взимку приготувати з них все, що забажаєш: хоч ікру, хоч соте. Втім, є кілька рецептів дуже смачних баклажанів, які ти зможеш законсервувати досить швидко.
                            </p>

                            <h4 class="mb-3">Баклажани гострі, мариновані цілком.</h4>
                            <ul class="list">
                                <li class="list-item">На літрову банку: 500 – 600 г молодих баклажанів.</li>
                                <li class="list-item">Одна столова ложка солі.</li>
                                <li class="list-item">Одна столова ложка цукру.</li>
                                <li class="list-item">Одна столова ложка 9%-ного оцту.</li>
                                <li class="list-item">Один лавровий листок.</li>
                                <li class="list-item">1/2 - 1 стручок гіркого перцю.</li>
                            </ul>
                            <p>
                                Молоді баклажани вимий і відріж у них «носики» та хвостики». Для того щоб визначити кількість необхідної заливки, поклади баклажани в банку і залий гарячою кип'яченою водою до самого верху. Злий воду з банки в каструлю, додай сіль та цукор і приготуй заливку. Якщо збираєшся законсервувати кілька банок, збільши кількість води в кілька разів, плюс 2-1 склянка на википання. В іншій каструлі закип'яти воду, додай до неї сіль (20-25 г солі на 1 л води) і опусти туди баклажани. Коли вода знову почне кипіти (на це піде приблизно 5-7 хв), вийми баклажани за допомогою шумівки і відразу розклади в стерильні банки, на дно яких уклади лаврове листя і гострий перець. Потім залий баклажани киплячої заливкою, накрий банку кришкою і стерилізуй при 100 ° С протягом 5-7 хв. Після цього влий у банку оцет і закатай. Якщо ти маєш можливість зберігати заготовки в холодному підвалі, можеш не стерилізувати банку, а одразу влити оцет і закатати. Після цього переверни банку догори дном і укутай одеялом для самостерилізації. Взимку подавай мариновані баклажани, попередньо нарізавши їх кубиками і заправивши подрібненим часником з майонезом або соняшниковою олією.
                            </p>
                            
                            <h4 class="mb-3">Баклажанна закуска "Пальчики". </h4>
                            <ul class="list">
                                <li class="list-item">На 10 півлітрових банок: 3 кг молодих баклажанів.</li>
                                <li class="list-item">1 кг солодкого перцю.</li>
                                <li class="list-item">2 л томатного соку чи помідорної маси.</li>
                                <li class="list-item">1 склянка цукру.</li>
                                <li class="list-item">1 склянка олії.</li>
                                <li class="list-item">1 склянка 9%-го оцту, сіль за смаком.</li>
                            </ul>
                            <p>
                                Підготовлені баклажани розріж уздовж на 8 часточок. Перець очисти та розріж кожен на 4 частини. Стиглі помідори вимий, крупно наріж і пропусти через м'ясорубку (на 2 л маси тобі потрібно 2,6-2,7 кг помідорів). Уклади овочі в каструлю, додай томатний сік (помідорну масу), цукор, масло та оцет, посоли по смаку, перемішай та доведи до кипіння. З моменту закипіння вари суміш 10-20 хв, а потім швидко розфасуй закуску в банки, закатай їх, переверни і укутай. І моя тобі порада! Коли я консервую цю закуску, то зазвичай готую 1,5 кг баклажанів та стільки ж цвітної капусти. Потім я поділяю всі інші інгредієнти навпіл і розкладаю їх у дві каструлі. В одну з них я кладу підготовлені часточки баклажанів, а в іншу бланшировані в підсоленій воді маленькі суцвіття цвітної капусти. Далі роблю все так, як описано у рецепті. В результаті я отримую замість однієї закуски одразу дві. Спробуй – сподіваюся, моя цвітна капуста в томатній заливці доведеться тобі до смаку.
                            </p>

                            <h4 class="mb-3">Баклажани в кислому пряному маринаді.</h4>
                            <ul class="list">
                                <li class="list-item">На 4 літрові банки: 2 кг молодих баклажанів.</li>
                                <li class="list-item">8 ст. ложок 9% оцту.</li>
                                <li class="list-item">4 лаврові листи, по 12 горошин чорного і запашного перцю, 4 гвоздички, паличка кориці.</li>
                                <li class="list-item">Для заливання: 2 л води, 2 ст. ложки солі, 2 ст. ложки цукру.</li>
                            </ul>
                            <p>
                                Підготовлені баклажани, не очищаючи, наріж крупними шматками. Опусти баклажани в киплячу підсолену воду 3-5 хв (не більше!), а потім відкинь їх на друшляк. Приготуйте заливку, розчинивши в киплячій воді сіль і цукор. На дно стерилізованих банок поклади прянощі, влий по 2 ст. ложки оцту. Потім поклади у банки ще гарячі баклажани, залий їх киплячою заливкою, наповнюючи банки до самого верху. Після цього закатай банки, переверни догори дном і закутай для самостерилізації. Взимку подавай баклажани так само, як описано у попередньому рецепті.
                            </p>
                            
                            <h4 class="mb-3">Баклажани гострі, мариновані під гриби.</h4>
                            <ul class="list">
                                <li class="list-item">На трилітрову банку: 1,5 кг баклажанів.</li>
                                <li class="list-item">1 крупна головка часнику, 300 г зелені кропу.</li>
                                <li class="list-item">1 склянка олії.</li>
                                <li class="list-item">Для заливання: 2 л води, 2 ст. ложки солі, 2 ст. ложки 70%-ної оцтової кислоти.</li>
                            </ul>
                            <p>
                                Баклажани, мариновані за цим рецептом, за смаком нагадують мариновані гриби. Тобі підійдуть як дрібні, і великі плоди. Баклажани вимий і видали плодоніжки. Великі плоди очисти, а дрібні залиши як є. Підготовлені баклажани наріж кубиками або брусочками. Приготуй заливку: розчини в киплячій воді сіль, а потім додай оцет. У киплячу заливку опусти баклажани і вари їх 5 хв (кубики) або 8 хв (брусочки), рахуючи з моменту закипання. Після цього відкинь баклажани на друшляк і залиши там, щоб з них стекла рідина. Через 2-3 години подрібни часник, дрібно наріж зелень кропу і перемішай їх у великій мисці з баклажанами та олією. Уклади баклажани в банку, закрий поліетиленовою кришкою і постав у холодильник. До речі, за цим рецептом ти можеш заготовити мариновані кабачки, цукіні чи патисони. І моя тобі порада! Для більш вишуканого та м'якого за смаком маринаду як варіант можеш використати суміш з води і білого винного оцту, краще в співвідношенні 1:2. Але обов'язково спробуй маринад і, якщо в ньому багато кислоти, додай води. У такій самій пропорції можна з'єднати воду з вином, краще з білим сухим. І ще спробуй законсервувати ці баклажани для тривалішого зберігання. Зроби це так: злий маринад з банки в каструлю, закип'яти його і залий баклажани, наповнивши банку до самого верху. Закатай банку, переверни догори дном і закутай для самостерилізації. Тепер можеш зберігати її в кладовці 2-3 місяці.
                            </p>

                            <h4 class="mb-3">Баклажанна ікра з овочами.</h4>
                            <ul class="list">
                                <li class="list-item">На 1 кг баклажанів.</li>
                                <li class="list-item">300-400 г помідорів.</li>
                                <li class="list-item">200 г моркви.</li>
                                <li class="list-item">100 мл рафінованої олії.</li>
                                <li class="list-item">Пучок петрушки, сіль, цукор і мелений чорний перець за смаком, цибуля.</li>
                            </ul>
                            <p>
                                Баклажанна ікра відрізняється тим, що на її заготівлю, особливо на стерилізацію, йде занадто багато часу. Цей рецепт ікри з баклажанів дозволить тобі заощадити трохи часу за умови, що ти виконуватимеш одночасно кілька операцій. Отже, приготуй великий глибокий сотейник або інший глибокий посуд і дві глибокі сковороди (сотейника) поменше. Баклажани вимий, очисти, наріж соломкою, поклади в миску, посоли і дай полежати 30 хв. Тим часом очисти цибулю і наріж її півкільцями, потім очисти моркву і натри її на великій тертці, а зелень петрушки дрібно порубай. Спасеруй цибулю і моркву на олії в одній зі сковорідок, потім додай зелень і приправ все сіллю, цукром і перцем за смаком. Помідори вимий і очисти від шкірки будь-яким зручним для тебе способом, потім наріж їх дрібно і постав припускатися в олії в другій сковороді (під кришкою). Поки помідори готуються, налий олію в глибокий посуд, постав її на вогонь і займися баклажанами. Відіжми їх руками і опусти в нагріте масло. Допускай баклажани в олії до м'якості. Коли це відбулося, додай до баклажанів весь вміст сковорідок, посоли, поперчи, якщо треба, додай цукор, перемішай та вари 5 хв. Гарячу масу розклади у банки. Стерилізуй при 100 ° С банки ємністю 0,5 л 10 хв, 1 л 20 хв. Після цього закатай банки, переверни вгору дном, укутай і залиш до повного остигання.
                            </p>
                            
                            <h4 class="mb-3">Закуска з баклажанів на зиму.</h4>
                            <ul class="list">
                                <li class="list-item">1 кг баклажанів.</li>
                                <li class="list-item">Цибуля ріпчаста - 500 г.</li>
                                <li class="list-item">Помідори червоні соковиті – 600 г.</li>
                                <li class="list-item">100 мл рафінованої олії.</li>
                                <li class="list-item">Сіль – 1 ст. л. Перець чорний мелений – 1 ч. л.</li>
                            </ul>
                            <p>
                                Смачна та корисна холодна закуска з баклажанів та помідорів, яку можна заготовити на зиму, витративши мінімум часу та сил. Баклажани добре вимити, відрізати кінчики та нарізати дрібними кубиками. На сковороду вилити приблизно половину олії, добре розігріти її. Викласти на сковороду баклажани. Обсмажити до одержання золотистого кольору. Цибулю почистити, дрібно нарізати ножем. Обсмажити на олії до ніжно-золотистого кольору. Помідори також дрібно порізати і обсмажити на олії. Усі обсмажені овочі скласти в одну ємність. Посолити, поперчити та перемішати. Довести до кипіння. Зручно варіння обсмажених овочів робити в мультиварці: встановити режим «варіння» та час 15 хвилин. Розкласти гарячу овочеву суміш із стерилізованих банків. Накрити кришками та поставити в духовку на 40 хвилин. Після цього банки закатати. Закуска з баклажанів готова на зиму. Зберігати холодну закуску з баклажанів у прохолодному місці усю зиму. Вдалих заготовок!
                            </p>

                            <h4 class="mb-3">Баклажани квашені.</h4>
                            <ul class="list">
                                <li class="list-item">Для розсолу:</li>
                                <li class="list-item">на 1 л води</li>
                                <li class="list-item">2 ст. ложки солі</li>
                            </ul>
                            <p>
                                Свіжі невеликі баклажани з пружною м'якоттю вимий, видали плодоніжки, ополосни холодною водою і дай їй стекти. У підготовлений посуд пошарово поклади баклажани та миту зелень, розрахувавши так, щоб останній шар був із зелені. Наповнену тару залий розсолом на 3-4 см вище за рівень зелені, накрий складеним у 3-4 шари марлею, зверху поклади кружок з гнітом. Перші 2-3 дні тримай посуд з баклажанами у теплому приміщенні, потім винеси у підвал чи інше холодне місце. Використовуй квашені баклажани для приготування рагу, салатів та інших страв. До речі, регулярно вживаючи в їжу не піддані термічній обробці квашені баклажани, можна покращити стан ясен при пародонтозі.
                            </p>

                            <h4 class="mb-3">Десятка.</h4>
                            <ul class="list">
                                <li class="list-item">На 6-7 півлітрових банок.</li>
                                <li class="list-item">10 баклажанів середнього розміру.</li>
                                <li class="list-item">10 стручків солодкого перцю, 10 цибулин.</li>
                                <li class="list-item">2 л помідорної маси.</li>
                                <li class="list-item">1 склянка цукру, 2 ст. ложки 9%-ного оцту, 1 склянка рафінованої олії, сіль за смаком.</li>
                            </ul>
                            <p>
                                Підготовлені баклажани наріж кубиками, перець - квадратиками або соломкою, цибуля - півкільцями. Помідори наріж і пропусти через м'ясорубку (для отримання 2 л маси тобі потрібно приблизно 2,7 кг помідорів), перелий у каструлю, додай цукор та олію і доведи до кипіння. Потім опусти в каструлю цибулю та вари 10 хв, після цього додай баклажани, а через 10 хв перець. Поваривши ще 10 хв, посоли суміш за смаком, влий оцет і зніми з вогню. Розклади суміш у банки, закатай, переверни та укутай.
                            </p>
                            
                            <h4 class="mb-3">Гостра десятка.</h4>
                            <ul class="list">
                                <li class="list-item">На 6 півлітрових банок.</li>
                                <li class="list-item">10 баклажанів середнього розміру, 10 стручків солодкого перцю, 10 стиглих помідорів, 10 зубчиків часнику.</li>
                                <li class="list-item">2 стручки гострого перцю.</li>
                                <li class="list-item">3 ст. ложки солі, 4 ст. ложки цукру.</li>
                                <li class="list-item">80 мл 9%-ного оцту, 200 мл рослинної олії.</li>
                            </ul>
                            <p>
                                Цей рецепт тільки з першого погляду здається схожим на десятку, насправді це зовсім інша, не менш смачна закуска. Помідори, солодкий і гострий перці та часник пропустити через м'ясорубку. Отриману масу злий у каструлю, постав на вогонь, доведи до кипіння і кип'ятити 5 хв, а в кінці додай сіль, цукор, олію та оцет. Коли суміш знову закипить, опусти в неї нарізані кружальцями баклажани, доведи до кипіння та кип'ятити 15 хв. Після цього розклади баклажани у стерилізовані банки. Заливку, що залишилася, знову закип'яти і киплячою розлий у банки. Банки одразу ж закатай, переверни та укутай.
                            </p>
                        </div>
                    </div>
                </div>
            </section>

        <section class="BgImage"></section>

        <!-- Секция для добавления рецептов -->
        <section id="add-recipe" class="section-padding">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-lg-8 col-12">
                        <div class="recipe-form">
                            <h2 class="form-title">Додати свій рецепт</h2>
                            <form id="recipeForm">
                                <div class="mb-3">
                                    <label for="recipeTitle" class="form-label">Назва рецепту*</label>
                                    <input 
                                        type="text" 
                                        class="form-control" 
                                        id="recipeTitle" 
                                        required 
                                        placeholder="Введіть назву вашого рецепту"
                                    >
                                </div>
                                <div class="mb-3">
                                    <label for="recipeCategory" class="form-label">Категорія*</label>
                                    <select class="form-select" id="recipeCategory" required>
                                        <option value="">Виберіть категорію</option>
                                        <option value="Сніданок">Сніданок</option>
                                        <option value="Обід">Обід</option>
                                        <option value="Вечеря">Вечеря</option>
                                        <option value="Десерт">Десерт</option>
                                        <option value="Пістне">Пістне</option>
                                        <option value="Консервація">Консервація</option>
                                        <option value="Випічка">Випічка</option>
                                        <option value="Напої">Напої</option>
                                        <option value="Салати">Салати</option>
                                        <option value="Закуски">Закуски</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Зображення (опціонально)</label>
                                    <div class="file-input-wrapper">
                                        <div class="file-input-label">
                                            <i class="bi bi-upload me-2"></i>Обрати файл
                                            <input 
                                                type="file" 
                                                class="form-control" 
                                                id="recipeImageFile" 
                                                accept="image/*"
                                            >
                                        </div>
                                        <span id="fileName" class="file-name">Файл не обрано</span>
                                    </div>
                                    <div class="form-text">Максимальний розмір: 1MB (JPG, PNG)</div>
                                </div>
                                <div class="mb-3">
                                    <label for="recipeIngredients" class="form-label">Інгредієнти*</label>
                                    <textarea 
                                        class="form-control" 
                                        id="recipeIngredients" 
                                        rows="4" 
                                        required 
                                        placeholder="Перелічіть інгредієнти, кожен з нового рядка"
                                    ></textarea>
                                </div>
                                <div class="mb-3">
                                    <label for="recipeInstructions" class="form-label">Інструкція приготування*</label>
                                    <textarea 
                                        class="form-control" 
                                        id="recipeInstructions" 
                                        rows="6" 
                                        required 
                                        placeholder="Опишіть кроки приготування"
                                    ></textarea>
                                </div>
                                <div class="d-grid">
                                    <button type="submit" class="btn btn-success btn-lg">
                                        <span 
                                            id="submitSpinner" 
                                            class="spinner-border spinner-border-sm me-2" 
                                            role="status" 
                                            aria-hidden="true"
                                        ></span>
                                        Додати рецепт
                                    </button>
                                </div>
                            </form>
                            
                            <div id="recipePreview" class="recipe-preview mt-4">
                                <h4>Попередній перегляд:</h4>
                                <div class="card recipe-card">
                                    <img 
                                        id="previewImage" 
                                        src="images/default-recipe.jpg" 
                                        class="card-img-top" 
                                        alt="Попередній перегляд"
                                    >
                                    <div class="card-body">
                                        <h5 id="previewTitle" class="card-title">Назва рецепту</h5>
                                        <p id="previewCategory" class="card-text text-muted">Категорія: не вибрано</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Раздел для отображения пользовательских рецептов -->
        <section id="user-recipes" class="section-padding bg-white">
            <div class="container">
                <div class="row">
                    <h2 class="text-center mb-lg-5 mb-4">Рецепти від користувачів</h2>
                    
                    <div id="loadingRecipes">
                        <div class="spinner-border text-success" role="status">
                            <span class="visually-hidden">Завантаження...</span>
                        </div>
                        <p class="mt-3">Завантажуємо рецепти...</p>
                    </div>
                    
                    <div id="recipesContainer" class="row">
                        <!-- Сюда будут добавляться рецепты через JS -->
                    </div>
                    
                    <div id="noRecipesMessage" class="col-12 text-center d-none">
                        <p>Поки немає доданих рецептів. Будьте першим!</p>
                    </div>
                    
                    <div class="text-center mt-4">
                        <button id="loadMoreBtn" class="btn btn-outline-success d-none">Показати ще</button>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="site-footer section-padding">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <h4 class="text-white mb-4 me-5">Хрустка кухня</h4>
                </div>
            </div>
        </div>
    </footer>

    <!-- JAVASCRIPT FILES -->
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/custom.js"></script>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-storage-compat.js"></script>
    
    <script>
        // Конфигурация Firebase (ЗАМЕНИТЕ НА ВАШУ КОНФИГУРАЦИЮ)
        const firebaseConfig = {
            apiKey: "ВАШ_API_KEY",
            authDomain: "ВАШ_PROJECT.firebaseapp.com",
            projectId: "ВАШ_PROJECT",
            storageBucket: "ВАШ_PROJECT.appspot.com",
            messagingSenderId: "ВАШ_SENDER_ID",
            appId: "ВАШ_APP_ID"
        };

        // Инициализация Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const storage = firebase.storage();
        
        // Глобальные переменные
        let lastVisible = null;
        let selectedFile = null;
        const PAGE_SIZE = 6; // Количество рецептов за одну загрузку

        $(document).ready(function() {
            // Загрузка первых рецептов
            loadRecipes();
            
            // Обработчики событий
            $('#recipeForm').submit(handleFormSubmit);
            $('#recipeImageFile').on('change', handleImageUpload);
            $('#recipeTitle, #recipeCategory').on('input change', updatePreview);
            $('#loadMoreBtn').on('click', loadMoreRecipes);
        });

        // Обработка загрузки изображения
        function handleImageUpload(e) {
            const file = e.target.files[0];
            if (!file) {
                $('#fileName').text('Файл не обрано');
                selectedFile = null;
                return;
            }

            // Проверка типа файла
            if (!file.type.match('image/jpeg') && !file.type.match('image/png')) {
                alert('Будь ласка, виберіть файл у форматі JPG або PNG.');
                resetFileInput();
                return;
            }

            // Проверка размера файла
            if (file.size > 1048576) {
                alert('Файл занадто великий. Максимальний розмір 1MB.');
                resetFileInput();
                return;
            }

            $('#fileName').text(file.name);
            
            const reader = new FileReader();
            reader.onload = function(event) {
                selectedFile = event.target.result;
                updatePreview();
            };
            reader.readAsDataURL(file);
        }

        function resetFileInput() {
            $('#recipeImageFile').val('');
            $('#fileName').text('Файл не обрано');
        }

        function updatePreview() {
            const title = $('#recipeTitle').val() || 'Назва рецепту';
            const category = $('#recipeCategory').val() || 'не вибрано';
            
            if (selectedFile) {
                $('#previewImage').attr('src', selectedFile);
            }
            
            $('#previewTitle').text(title);
            $('#previewCategory').text('Категорія: ' + category);
            $('#recipePreview').show();
        }

        // Сжатие изображения для уменьшения размера
        function compressImage(file) {
            return new Promise((resolve) => {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const img = new Image();
                    img.src = e.target.result;
                    
                    img.onload = function() {
                        const canvas = document.createElement('canvas');
                        const ctx = canvas.getContext('2d');
                        
                        // Максимальные размеры
                        const MAX_WIDTH = 800;
                        const MAX_HEIGHT = 600;
                        
                        let width = img.width;
                        let height = img.height;
                        
                        // Изменяем размеры пропорционально
                        if (width > height) {
                            if (width > MAX_WIDTH) {
                                height *= MAX_WIDTH / width;
                                width = MAX_WIDTH;
                            }
                        } else {
                            if (height > MAX_HEIGHT) {
                                width *= MAX_HEIGHT / height;
                                height = MAX_HEIGHT;
                            }
                        }
                        
                        canvas.width = width;
                        canvas.height = height;
                        
                        // Рисуем сжатое изображение
                        ctx.drawImage(img, 0, 0, width, height);
                        
                        // Конвертируем в Blob с качеством 75%
                        canvas.toBlob(blob => {
                            resolve(blob);
                        }, 'image/jpeg', 0.75);
                    };
                };
                reader.readAsDataURL(file);
            });
        }

        // Загрузка изображения в Firebase Storage
        async function uploadImage(file) {
            try {
                // Сжимаем изображение
                const compressedBlob = await compressImage(file);
                
                // Создаем уникальное имя файла
                const fileName = `recipe-${Date.now()}-${Math.floor(Math.random() * 1000)}.jpg`;
                const storageRef = storage.ref();
                const fileRef = storageRef.child(`recipe-images/${fileName}`);
                
                // Загружаем файл
                await fileRef.put(compressedBlob);
                
                // Получаем URL для скачивания
                return await fileRef.getDownloadURL();
            } catch (error) {
                console.error("Помилка завантаження зображення:", error);
                throw new Error("Не вдалося завантажити зображення");
            }
        }

        // Обработка отправки формы
        async function handleFormSubmit(e) {
            e.preventDefault();
            
            // Показываем спиннер
            $('#submitSpinner').show();
            $('#recipeForm button').prop('disabled', true);
            
            try {
                const fileInput = document.getElementById('recipeImageFile');
                const file = fileInput.files[0];
                
                let imageUrl = 'images/default-recipe.jpg';
                
                // Загружаем изображение, если оно есть
                if (file) {
                    imageUrl = await uploadImage(file);
                }
                
                // Создаем объект рецепта
                const recipe = {
                    title: $('#recipeTitle').val(),
                    category: $('#recipeCategory').val(),
                    image: imageUrl,
                    ingredients: $('#recipeIngredients').val(),
                    instructions: $('#recipeInstructions').val(),
                    createdAt: firebase.firestore.FieldValue.serverTimestamp()
                };
                
                // Сохраняем в Firestore
                await db.collection("recipes").add(recipe);
                
                // Сброс формы
                $('#recipeForm')[0].reset();
                $('#recipePreview').hide();
                resetFileInput();
                selectedFile = null;
                
                // Перезагружаем рецепты
                await loadRecipes();
                
                alert('Рецепт успішно додано!');
                
                // Прокрутка к новому рецепту
                $('html, body').animate({
                    scrollTop: $('#user-recipes').offset().top - 100
                }, 800);
            } catch (error) {
                console.error("Помилка збереження рецепту:", error);
                alert('Сталася помилка: ' + error.message);
            } finally {
                // Скрываем спиннер и активируем кнопку
                $('#submitSpinner').hide();
                $('#recipeForm button').prop('disabled', false);
            }
        }

        // Загрузка рецептов
        async function loadRecipes() {
            try {
                // Показываем индикатор загрузки
                $('#loadingRecipes').show();
                $('#recipesContainer').empty();
                $('#noRecipesMessage').addClass('d-none');
                $('#loadMoreBtn').addClass('d-none');
                
                // Запрос к Firestore
                const query = db.collection("recipes")
                    .orderBy("createdAt", "desc")
                    .limit(PAGE_SIZE);
                
                const snapshot = await query.get();
                
                // Скрываем индикатор загрузки
                $('#loadingRecipes').hide();
                
                if (snapshot.empty) {
                    $('#noRecipesMessage').removeClass('d-none');
                    return;
                }
                
                // Сохраняем последний документ для пагинации
                lastVisible = snapshot.docs[snapshot.docs.length - 1];
                
                // Отображаем рецепты
                displayRecipes(snapshot);
                
                // Показываем кнопку "Загрузить еще", если есть еще рецепты
                if (snapshot.size === PAGE_SIZE) {
                    $('#loadMoreBtn').removeClass('d-none');
                }
            } catch (error) {
                console.error("Помилка завантаження рецептів:", error);
                $('#loadingRecipes').html('<p class="text-danger">Помилка завантаження рецептів. Спробуйте оновити сторінку.</p>');
            }
        }

        // Загрузка дополнительных рецептов
        async function loadMoreRecipes() {
            try {
                $('#loadMoreBtn').prop('disabled', true).html('<span class="spinner-border spinner-border-sm me-2"></span>Завантаження...');
                
                const query = db.collection("recipes")
                    .orderBy("createdAt", "desc")
                    .startAfter(lastVisible)
                    .limit(PAGE_SIZE);
                
                const snapshot = await query.get();
                
                if (snapshot.empty) {
                    $('#loadMoreBtn').hide();
                    return;
                }
                
                // Обновляем последний документ
                lastVisible = snapshot.docs[snapshot.docs.length - 1];
                
                // Добавляем новые рецепты
                displayRecipes(snapshot);
                
                // Скрываем кнопку, если больше нет рецептов
                if (snapshot.size < PAGE_SIZE) {
                    $('#loadMoreBtn').hide();
                } else {
                    $('#loadMoreBtn').prop('disabled', false).text('Показати ще');
                }
            } catch (error) {
                console.error("Помилка завантаження рецептів:", error);
                $('#loadMoreBtn').prop('disabled', false).text('Показати ще');
                alert('Помилка завантаження додаткових рецептів');
            }
        }

        // Отображение рецептов на странице
        function displayRecipes(snapshot) {
            const container = $('#recipesContainer');
            
            snapshot.forEach(doc => {
                const recipe = doc.data();
                const recipeId = doc.id;
                
                // Форматируем дату
                const date = recipe.createdAt ? 
                    new Date(recipe.createdAt.toDate()).toLocaleDateString('uk-UA', {
                        day: 'numeric',
                        month: 'long',
                        year: 'numeric'
                    }) : 'Дата не вказана';
                
                const recipeHtml = `
                <div class="col-lg-4 col-md-6 col-12 mb-4">
                    <div class="menu-thumb recipe-card">
                        <div class="menu-image-wrap position-relative">
                            <a href="javascript:void(0);" onclick="showRecipeDetails('${recipeId}')">
                                <img 
                                    src="${recipe.image}" 
                                    class="img-fluid menu-image" 
                                    alt="${recipe.title}" 
                                    loading="lazy"
                                >
                                <span class="user-recipe-tag bg-success">Користувацький</span>
                            </a>
                        </div>
                        <div class="menu-info d-flex flex-wrap align-items-center">
                            <h4 class="mb-0">${recipe.title}</h4>
                            <span class="text-muted small ms-2">${date}</span>
                        </div>
                    </div>
                </div>`;
                
                container.append(recipeHtml);
            });
        }

        // Показ деталей рецепта
        window.showRecipeDetails = async function(recipeId) {
            try {
                const doc = await db.collection("recipes").doc(recipeId).get();
                
                if (!doc.exists) {
                    alert('Рецепт не знайдено');
                    return;
                }
                
                const recipe = doc.data();
                
                // Форматируем дату
                const date = recipe.createdAt ? 
                    new Date(recipe.createdAt.toDate()).toLocaleDateString('uk-UA', {
                        day: 'numeric',
                        month: 'long',
                        year: 'numeric',
                        hour: '2-digit',
                        minute: '2-digit'
                    }) : 'Дата не вказана';
                
                // Создаем HTML для модального окна
                const modalHtml = `
                <div class="modal fade recipe-modal" id="recipeDetailModal" tabindex="-1">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">${recipe.title}</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body">
                                <div class="row">
                                    <div class="col-md-5 mb-3 mb-md-0">
                                        <img 
                                            src="${recipe.image}" 
                                            class="img-fluid rounded mb-3" 
                                            alt="${recipe.title}"
                                        >
                                        <div class="recipe-meta">
                                            <p><strong>Категорія:</strong> ${recipe.category || 'Не вказана'}</p>
                                            <p><strong>Додано:</strong> ${date}</p>
                                        </div>
                                    </div>
                                    <div class="col-md-7">
                                        <div class="mb-4">
                                            <h5>Інгредієнти:</h5>
                                            <div class="recipe-ingredients">${formatText(recipe.ingredients)}</div>
                                        </div>
                                        <div>
                                            <h5>Інструкція:</h5>
                                            <div class="recipe-instructions">${formatText(recipe.instructions)}</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Закрити</button>
                            </div>
                        </div>
                    </div>
                </div>`;
                
                // Добавляем модальное окно в DOM
                $('body').append(modalHtml);
                
                // Показываем модальное окно
                const modal = new bootstrap.Modal(document.getElementById('recipeDetailModal'));
                modal.show();
                
                // Удаляем модальное окно после закрытия
                $('#recipeDetailModal').on('hidden.bs.modal', function() {
                    $(this).remove();
                });
            } catch (error) {
                console.error("Помилка завантаження рецепту:", error);
                alert('Не вдалося завантажити рецепт');
            }
        }

        // Форматирование текста (замена переносов строк)
        function formatText(text) {
            return text.replace(/\n/g, '<br>');
        }
    </script>
</body>
</html>